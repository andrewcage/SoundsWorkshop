
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>fm modulation</title>


<!-- <script type="text/javascript" src="../build/Tone.js"> </script> -->

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tone/13.0.1/Tone.min.js"></script>

</head>

<body>

<button onclick="start()"> 
start 
</button>

<button onclick="stop()"> 
stop 
</button>

<br>
<label> oscillator 1 frequency</label><input type="range" onChange="osc1Freq(this)" min="20" max="220"/> 

<br>
<label> oscillator 1 volume</label><input type="range" onChange="osc1Vol(this)" min="-100" max="0"/> 

<br>
<label> harmonicity</label><input type="number" onChange="harmon(this)" min="-100" max="0"/> 

<br>
<label> modulation index</label><input type="number" onChange="mI(this)" min="-100" max="0"/> 

<!-- <br>
<label> oscillator 2 frequency</label><input type="range" onChange="osc2Freq(this)" min="20" max="220"/> 

<br>
<label> oscillator 2 volume</label><input type="range" onChange="osc2Vol(this)" min="-100" max="0"/>  -->

<script type="text/javascript"> 

console.log("I'm modulating right now"); 

var osc = new Tone.FMOscillator({
			"type" : "sine",
			"frequency" : 220,
			"modulationIndex": 2, 
			"harmonicity":1,
			"modulationType":"square",
			"volume" : -12

}).toMaster(); 


// var osc2 = new Tone.FatOscillator({
// 			"type" : "square",
// 			"frequency" : 220,
// 			"volume" : -12
// 		}).toMaster();

function start(){ 
	osc.start(); 
	// osc2.start(); 
}

function stop(){
	osc.stop(); 
	// osc2.stop(); 
}

function osc1Freq(element){
	var freq1 = parseInt(element.value);

	osc.frequency.value = freq1; 
	console.log('frequency 1 is ', freq1); 
}

function osc1Vol(element){
	var vol1 = parseInt(element.value);

	osc.volume.value = vol1; 
	console.log('the volume for frequency 1 is', vol1); 
}

function harmon(element){
	var h = parseFloat(element.value); 
	osc.harmonicity.value = h; 
	console.log('the harmonicity is', h);
	//Harmonicity is the frequency ratio between the carrier and the modulator oscillators. A harmonicity of 1 gives both oscillators the same frequency. Harmonicity = 2 means a change of an octave.
}

function mI(element){
	var mi = parseFloat(element.value); 
	osc.modulationIndex.value = mi; 
	console.log('the harmonicity is', mi);
	//The modulation index which is in essence the depth or amount of the modulation. In other terms it is the ratio of the frequency of the modulating signal (mf) to the amplitude of the modulating signal (ma) â€“ as in ma/mf.
}









</script>

</body>
</html>
